<!-- Link to external CSS -->
<link rel="stylesheet" href="./machines.css">

<div class="min-h-screen machines-bg text-off-white">
    <!-- Hero Section -->
    <header class="relative pt-32 pb-24 overflow-hidden border-b border-white/5">
        <!-- Gold Glow Effects -->
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[600px] bg-accent/5 blur-[120px] rounded-full">
        </div>

        <div class="container mx-auto px-6 relative z-10 text-center">
            <h1 class="hero-title text-5xl md:text-7xl font-bold mb-8 text-white">
                <span
                    class="block text-accent/60 text-sm md:text-lg uppercase tracking-[0.5em] font-sans mb-6 font-light">Elite
                    Clinical Technology</span>
                MACHINES
            </h1>
            <div class="w-32 h-[1px] bg-gradient-gold mx-auto mb-10 opacity-60"></div>
            <p
                class="text-lg md:text-xl text-gray-light max-w-3xl mx-auto leading-relaxed font-light font-sans tracking-wide">
                Where clinical expertise meets cutting-edge innovation. Explore our hand-picked selection of
                state-of-the-art physiotherapy equipment designed for maximum recovery potential.
            </p>
        </div>
    </header>

    <!-- Navigation / Categories -->
    <nav class="sticky top-20 z-50 bg-primary/40 backdrop-blur-2xl border-b border-white/5 py-6">
        <div class="container mx-auto px-6 overflow-x-auto">
            <div class="flex gap-10 min-w-max justify-center">
                <button *ngFor="let cat of categories" (click)="setCategory(cat)"
                    class="nav-btn transition-all duration-500 text-[10px] font-semibold tracking-[0.3em] uppercase relative group pb-1"
                    [ngClass]="activeCategory === cat ? 'text-accent' : 'text-gray-light/60 hover:text-white'">
                    {{ cat }}
                    <span class="absolute bottom-0 left-0 h-[1px] bg-accent transition-all duration-500"
                        [style.width]="activeCategory === cat ? '100%' : '0'"
                        [class.group-hover:w-full]="activeCategory !== cat"></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Grid -->
    <main class="py-24 container mx-auto px-6">

        <!-- Grouped Categories (Show All View) -->
        <ng-container *ngIf="activeCategory === 'All'; else filteredView">
            <div *ngFor="let group of groupedMachines" class="mb-32 animate-fade-in">
                <!-- Group Header -->
                <div class="section-header">
                    <div class="section-line"></div>
                    <h2 class="section-title">{{ group.title }}</h2>
                    <div class="section-line"></div>
                </div>

                <!-- Group Grid -->
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-10">
                    <div *ngFor="let machine of group.machines" class="machine-card group">
                        <!-- Horizontal Layout: Image Left -->
                        <div class="machine-card-image-outer">
                            <div class="machine-card-image-inner">
                                <img [src]="machine.image" [alt]="machine.name" class="machine-card-image"
                                    onerror="this.src='assets/machines/placeholder_fallback.jpg'">
                            </div>
                        </div>
                        <!-- Horizontal Layout: Content Right -->
                        <div class="machine-card-content">
                            <h3 class="machine-card-title">{{ machine.name }}</h3>
                            <p class="machine-card-description">{{ machine.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>

        <!-- Filtered View (Single Category) -->
        <ng-template #filteredView>
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-10 animate-fade-in">
                <div *ngFor="let machine of filteredMachines" class="machine-card group">
                    <div class="machine-card-image-outer">
                        <div class="machine-card-image-inner">
                            <img [src]="machine.image" [alt]="machine.name" class="machine-card-image"
                                onerror="this.src='assets/machines/placeholder_fallback.jpg'">
                        </div>
                    </div>
                    <div class="machine-card-content">
                        <h3 class="machine-card-title">{{ machine.name }}</h3>
                        <p class="machine-card-description">{{ machine.description }}</p>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="filteredMachines.length === 0" class="text-center py-24">
                <h3 class="text-2xl font-serif text-accent/60 italic tracking-widest uppercase">Collection Unavailable
                </h3>
                <button (click)="setCategory('All')"
                    class="mt-8 text-[10px] font-bold tracking-[0.3em] uppercase border-b border-accent/40 py-2 hover:border-accent transition-all">Back
                    to Gallery</button>
            </div>
        </ng-template>

    </main>

    <!-- Footer Accents -->
    <div class="py-24 text-center opacity-20 pointer-events-none">
        <div class="w-24 h-px bg-gradient-gold mx-auto mb-6"></div>
        <div class="hero-title text-[8px] tracking-[0.5em] uppercase text-accent font-bold">Standard of Excellence</div>
    </div>
</div>